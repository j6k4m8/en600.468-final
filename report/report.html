<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">

    <title>
        Goshen: GOlly, Someone please Help mE acroNymize! - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/highlight.js/8.8.0/styles/github-gist.min.css">
    <style>
        .markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.vimeo iframe,.youtube iframe,.youtube img{top:0;left:0;height:100%;position:absolute}.markdown-body{font-size:1pc;line-height:1.6;word-wrap:break-word}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body .absent{color:#c00}.markdown-body .anchor{display:inline-block;padding-right:2px;margin-left:-18.36px}.markdown-body .anchor:focus{outline:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:1em;margin-bottom:1pc;font-weight:700;line-height:1.4}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2.25em;line-height:1.2}.markdown-body h1 .anchor{line-height:1}.markdown-body h2{font-size:1.75em;line-height:1.225}.markdown-body h2 .anchor{line-height:1}.markdown-body h3{font-size:1.5em;line-height:1.43}.markdown-body h3 .anchor,.markdown-body h4 .anchor{line-height:1.2}.markdown-body h4{font-size:1.25em}.markdown-body h5 .anchor,.markdown-body h6 .anchor{line-height:1.1}.markdown-body h5{font-size:1em}.markdown-body h6{font-size:1em;color:#777}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:1pc}.markdown-body hr{height:4px;padding:0;margin:1pc 0;background-color:#e7e7e7;border:0}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:1pc}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:1pc;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 1pc;margin-bottom:1pc}.markdown-body blockquote{padding:0 15px;color:#777;border-left:4px solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;-moz-box-sizing:border-box;box-sizing:border-box}.markdown-body .emoji{width:20px;height:20px;max-width:none;margin-bottom:0}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:.2em 0;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:1pc}.markdown-body .highlight pre,.markdown-body pre{padding:1pc;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:9pt;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body pre{word-wrap:normal;border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-webkit-inline-flex;display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 1pc}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:0 0;padding:0}.ui-user-icon,.vimeo,.youtube{background-position:center center;background-repeat:no-repeat;background-size:contain}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:''}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code{text-align:left}.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg{max-width:100%;height:100%}.vimeo,.youtube{position:relative;cursor:pointer;display:table;width:100%;text-align:center;background-color:#000;overflow:hidden}.youtube{position:relative;width:100%;padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{width:100%;object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe{width:100%;vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;margin-top:-40px;margin-left:-40px;color:#fff;opacity:.3;-webkit-transition:opacity .2s;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;-webkit-transition:opacity .2s;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.ui-infobar{max-width:758px;margin-top:25px;margin-bottom:-25px;color:#777}.ui-toc{position:fixed;bottom:20px;z-index:10000}.ui-toc-label{opacity:.3;background-color:#ccc;border:none;-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:65vh;overflow:auto;text-align:inherit}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul,.ui-user-icon{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:9pt;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:9pt;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body[lang^=ja]{font-family:"Helvetica Neue",Helvetica,Arial,Meiryo,"MS Gothic","ＭＳ ゴシック",sans-serif}.ui-toc-dropdown[lang^=ja]{font-family:"Source Sans Pro",Helvetica,Arial,"Meiryo UI","MS PGothic","ＭＳ Ｐゴシック",sans-serif}.markdown-body[lang=zh-tw]{font-family:"Helvetica Neue",Helvetica,Arial,"Microsoft JhengHei","微軟正黑",sans-serif}.ui-toc-dropdown[lang=zh-tw]{font-family:"Source Sans Pro",Helvetica,Arial,"Microsoft JhengHei UI","微軟正黑UI",sans-serif}.markdown-body[lang=zh-cn]{font-family:"Helvetica Neue",Helvetica,Arial,"Microsoft YaHei","微软雅黑",sans-serif}.ui-toc-dropdown[lang=zh-cn]{font-family:"Source Sans Pro",Helvetica,Arial,"Microsoft YaHei UI","微软雅黑UI",sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:9pt;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px}.ui-user-icon.small,small .dropdown{display:inline-block}.ui-user-icon.small{width:18px;height:18px;vertical-align:middle;margin:0 0 .2em}small span{line-height:22px}small .dropdown a:focus,small .dropdown a:hover{text-decoration:none}.unselectable{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:9pt!important}}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:1px 1px 1px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;font-family:"Source Sans Pro",Helvetica,Arial,sans-serif;letter-spacing:.025em}:focus{outline:0!important}::-moz-focus-inner{border:0!important}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.2.0/es5-shim.min.js"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid"><h1 id="goshen-golly-someone-please-help-me-acronymize"><a class="anchor hidden-xs" href="#goshen-golly-someone-please-help-me-acronymize" title="goshen-golly-someone-please-help-me-acronymize"><span class="octicon octicon-link"></span></a>Goshen: GOlly, Someone please Help mE acroNymize!</h1><p>Jordan Matelsky (jmatels1) — Spring 2016</p><h2 id="abstract"><a class="anchor hidden-xs" href="#abstract" title="abstract"><span class="octicon octicon-link"></span></a>Abstract</h2><blockquote>
<p>Moses is an immensely powerful statistical machine translation engine that provides a comprehensive toolkit for those in the machine translation community. However, these tools are prohibitively technical for the casual semi-technical or non-technical user. Goshen provides a front-end JavaScript library for interacting with <code>mosesserver</code>, and furthermore expands upon the advantages of abstracting away the actual translation (using <code>GoshenAdapter</code>s, etc) to enable turn-key drop-in translation backends.</p>
</blockquote><blockquote>
<p>To illustrate the utility of Goshen, this project also includes GoshenTalk, a web-app example of using Goshen for real-time asynchronous translation for multiple human end-users.</p>
</blockquote><blockquote>
<p>I ran into some difficulties while installing Moses and the corresponding upstream supporting libraries. In order to improve this installation experience for others, I have also compiled a series of installation scripts that I used (with general success) during the production of my final project. These scripts are known to work on the latest AWS EC2 14.04 Ubuntu AMI. For other operating systems or platforms, I offer common workarounds, and have contributed documentation as appropriate to the Moses wiki docs (after collaboration with its current authors).</p>
</blockquote><h2 id="0-introduction"><a class="anchor hidden-xs" href="#0-introduction" title="0-introduction"><span class="octicon octicon-link"></span></a>0. Introduction</h2><p>This repository is comprised of four main deliverables:</p><table>
<thead>
<tr>
<th>Deliverable</th>
<th>Path</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Installation Scripts</td>
<td><code>/scripts</code></td>
<td>A set of installation scripts to assist in the provisioning of a server for use with the Goshen frontend JavaScript library.</td>
</tr>
<tr>
<td>The Goshenjs Library</td>
<td><code>/goshenlib</code></td>
<td>A JavaScript library that adheres to conventional JS coding standards and utilizes modern technology, such as the ECMAScript 2015 specs for in-browser and Node-based compatibility. (I surprised myself by really liking JavaScript for this project!)</td>
</tr>
<tr>
<td>Chrome Extension</td>
<td><code>/goshen-chrome</code></td>
<td>A Chrome plugin that emulates the behavior of the existing <a href="https://chrome.google.com/webstore/detail/google-translate/aapbdbdomjkkjkaonfhkkikfgjllcleb?hl=en" target="_blank">Google Translate extension</a> according to the feature-request suggestion on the <a href="http://www.statmt.org/moses/?n=Moses.GetInvolved" target="_blank">official Moses documentation</a>.</td>
</tr>
<tr>
<td>Realtime Chat Translation</td>
<td><code>/goshen-app</code></td>
<td>A web-app developed in the Meteor framework that (a) uses the Goshen.js library developed above, and (b) serves as a demonstration of the capabilities of the Goshen library. Translates chat messages in realtime, and optionally reads them aloud in the user’s native language.</td>
</tr>
</tbody>
</table><h2 id="1-installation-and-setup-scripts"><a class="anchor hidden-xs" href="#1-installation-and-setup-scripts" title="1-installation-and-setup-scripts"><span class="octicon octicon-link"></span></a>1. Installation and Setup Scripts</h2><p>This section explains the usage of the various parts of the platform that were developed for this project.</p><p>If you’re looking for a cure-all, do-everything-you-ever-wanted, best-day-ever solution, check out <a href="#the-whole-enchilada"><strong>The Whole Enchilada</strong></a> section below for a full, start-to-finish installation script.</p><h3 id="moses-installation"><a class="anchor hidden-xs" href="#moses-installation" title="moses-installation"><span class="octicon octicon-link"></span></a>Moses Installation</h3><p>I here describe the setup process I developed in order to best set up a Moses server and the complementary <code>moses-mt-server</code> quickly for use over HTTP with the Goshen frontend.</p><p>I began by writing two scripts that thinly wrapped the suggested protocols on <a href="http://www.statmt.org/moses/?n=Development.GetStarted" target="_blank">the MOSES documentation page</a>, prioritizing simplicity and ease of installation and configuration. My installation uses MOSES with MGIZA for word-alignment (chosen to fully utilize the multi-processor architecture on which I am running my devlopment server). Installation can be performed automatically by running the corresponding <code>install-moses.sh</code> and <code>install-mgiza.sh</code> scripts from the <code>scripts/install</code> directory, which are entirely standalone and can be run in sequence on a new Ubuntu 14.04 installation to go from start to finish without any further installations needed. Depending on your preferred configuration, you may also need to install the correct <code>Boost</code> library for your OS distribution.</p><p>I also wrote this front-end to be compatible with the Linux binaries distributed on the Moses website <a href="http://www.statmt.org/moses/RELEASE-3.0/binaries/linux-64bit/linux-64bit.tgz" target="_blank">here</a>. To use this binary instead, you can run the <code>configure-from-binary.sh</code> script. (Note that on an AWS ec2 m3.medium local to Virginia, this download took 10 minutes.)</p><p>You will need xmlrpc-c, which is available on SourceForge. To download this, you can use the <code>install-xmlrpc.sh</code> script. If you have trouble reproducing my successes, please feel free to reach out and I’ll help you as best as I can. This seemed to be the ‘trick’ to getting the installation correct: Without xmlrpc-c, the moses-mt-server installation failed silently, until runtime.</p><h3 id="test-data-download-and-configuration"><a class="anchor hidden-xs" href="#test-data-download-and-configuration" title="test-data-download-and-configuration"><span class="octicon octicon-link"></span></a>Test Data Download and Configuration</h3><p>Use the <code>scripts/tests/test-model.sh</code> script to download and untar some demo data.</p><h3 id="casmacat-moses-mt-server-installation"><a class="anchor hidden-xs" href="#casmacat-moses-mt-server-installation" title="casmacat-moses-mt-server-installation"><span class="octicon octicon-link"></span></a><code>casmacat moses-mt-server</code> Installation</h3><p>After xmlrpc-c has been installed and configured, moses-mt-server should operate out of the box: The next step is to install and configure <a href="https://github.com/casmacat/moses-mt-server/tree/master/python_server" target="_blank">moses-mt-server</a>.</p><p>I use casmacat’s moses-mt-server as a go-between between mosesserver and the JSON interface that Goshen accesses because it provides a more modern, developer-friendly API. (Indeed, it was developed to emulate the Google Translate API, though it does not cover all endpoints exposed by GT, and has some of its own not provided by GT.) Install the suite with <code>scripts/install/install-casmacat.sh</code>. (You can also manually clone this repository.)</p><p>Note that pip is installed in this step, which is then used to install cherrypy, Levenshtein, and other required libraries. If you have preferences about your pip installation, then you should override this step with your own Python package manager. Do note that many of the packages mentioned in this document are installable via the Conda suite.</p><p>The moses-mt-server can then be run with <code>run/runserver-casmacat.sh</code>.</p><h3 id="the-whole-enchilada"><a class="anchor hidden-xs" href="#the-whole-enchilada" title="the-whole-enchilada"><span class="octicon octicon-link"></span></a>The Whole Enchilada</h3><p>If you want to have a good day instead of a bad day (e.g. the bad day that I had when troubleshooting the install and writing these scripts on 14.04 a few weeks ago), run <code>the-whole-enchilada.sh</code> from the root of the scripts directory. I can guarantee (with some degree of confidence) that this will work for you right out of the box. (Bug reports are more than welcome on the <a href="https://github.com/j6k4m8/en600.468-final/issues" target="_blank">GitHub repository</a>.)</p><h3 id="running-casmacat’s-moses-mt-server-over-mosesserver"><a class="anchor hidden-xs" href="#running-casmacat’s-moses-mt-server-over-mosesserver" title="running-casmacat’s-moses-mt-server-over-mosesserver"><span class="octicon octicon-link"></span></a>Running casmacat’s moses-mt-server over mosesserver</h3><p>Start <code>mosesserver</code> with your specified model configuration file. If you want to get off the ground quickly, use <code>scripts/run/runserver-europarl</code>, which uses the EuroParl corpus as its model source.</p><p>You now have <code>mosesserver</code> running locally on port 8080. Next, we’ll run casmacat’s moses-mt-server.</p><p>You can either run the server as per the casmacat documentation, or you can simply run <code>runserver-casmacat.sh</code>.</p><h3 id="…so-finally"><a class="anchor hidden-xs" href="#…so-finally" title="…so-finally"><span class="octicon octicon-link"></span></a>…so, finally:</h3><p>You can run everything inside the <code>scripts/run</code> directory — each will need its own terminal to run in, but once you’re running those, you can hit your JSON server at <code>ip:port/translate</code>. I suggest using tmux to multiplex terminal windows and detach from your ssh session cleanly.</p><h2 id="2-the-goshenjs-library"><a class="anchor hidden-xs" href="#2-the-goshenjs-library" title="2-the-goshenjs-library"><span class="octicon octicon-link"></span></a>2. The Goshen.js Library</h2><p>As Google Translate is the current go-to machine-translation system for developers, I intend to make Moses a viable alternative for even the non-savvy developer. This is in large part simplified by having an easily deployed (perhaps Dockerized) Moses server, as mentioned in the section above. However, it is also greatly simplified by exposing a comprehensive and well-formed JavaScript API that allows the same level of flexibility as the existing Google API.</p><p>Instead of trying to duplicate the Google Translate API, I instead chose to write a wrapper for <em>any</em> translation engine. An engine with an exposed HTTP endpoint can be added to the Goshen translation library by implementing <code>GoshenAdapter</code>, for which I have provided a complete <code>moses-mt-server</code> implementation (<code>MosesGoshenAdapter</code>) and a partially complete proof of concept for Google Translate (<code>GoogleTranslateGoshenAdapter</code>). This is to illustrate that the engines can be used interchangeably for simple translation tasks, but the entirety of Moses functionality can be accessed whereas Google Translate fails to accommodate some more technical tasks.</p><p>The library is both commented and minified, available in the <code>goshenlib/</code> directory. It is also possible to import the unminified, importable version from <code>goshenlib/dist</code>. The complete documentation, as well as usage examples and implementation explanations and justifications, are available in <code>goshenlib/docs</code>.</p><h2 id="3-chrome-extension"><a class="anchor hidden-xs" href="#3-chrome-extension" title="3-chrome-extension"><span class="octicon octicon-link"></span></a>3. Chrome Extension</h2><p>I also developed a Chrome extension that utilizes the CASMACAT moses-mt-server/Moses backend to provide a frontend website translation service. The extension automatically detects the relevant content of most articles or body-text on the page, and at the user’s request, translates it to the requested language. Usage is explained below, as well as inside the extension popup after installation, for quick reference.</p><h3 id="known-limitations"><a class="anchor hidden-xs" href="#known-limitations" title="known-limitations"><span class="octicon octicon-link"></span></a>Known Limitations</h3><ul>
<li><strong>HTTPS</strong>. The server that I am running currently does not support HTTPS, and so translation requests made from websites served over HTTPS will probably fail due to cross-origin security policies (depending on your local browser configuration). This can be fixed in Chrome by running chrome with the <code>--disable-web-security</code> flag, though this is, of course, unadvisable. (Other strategies exist, such as hand-modifying your page headers to allow cross-domain script origins, or <a href="https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi?hl=en" target="_blank">having an extension do it for you</a>. For my purposes, testing on a virtual machine with <code>--disable-web-security</code> was adequate, but I strongly recommend against running that flag on your personal computer.)</li>
<li><strong>German-only.</strong> Currently, my demo only supports the translation of German to English, because my backend Moses server is only trained on the demonstration EuroParl DE→EN corpus. This is, of course, easily extensible, simply by adding the appropriate models to the Moses server.</li>
</ul><h3 id="usage"><a class="anchor hidden-xs" href="#usage" title="usage"><span class="octicon octicon-link"></span></a>Usage</h3><ol>
<li><strong>Install the unpacked extension.</strong> Go to <code>chrome://extensions</code> and click <kbd>Load Unpacked Extension</kbd>. Navigate to the <code>goshen-chrome/</code> directory, and load.</li>
<li>This adds a Goshen icon to your Chrome toolbar. <a><img src="figs/chrome-bar.png" alt=""></a> Clicking it brings up a simple modal that allows the switching of languages. (See above — currently, only DE→EN translation is supported, as that is all I’m running on my server.)</li>
<li>Use the <kbd>Alt</kbd>+<kbd>T</kbd> key-chord (“T” for “Translate”) to begin text-selection. The Goshen-translate extension will highlight elements of text in cyan as you mouse over them: To translate what is currently highlighted, click.<br>
<a><img src="figs/chrome-highlight.png" alt=""></a></li>
</ol><h2 id="4-chat-application"><a class="anchor hidden-xs" href="#4-chat-application" title="4-chat-application"><span class="octicon octicon-link"></span></a>4. Chat Application</h2><p>As a proof of concept, I have developed a chat application that allows for the realtime conversation between several users, using the Goshen.js library as a go-between to provide realtime translations to users. This is intended as a proof of concept of the Goshen library, more than a production-ready standalone application. The source-code for this project is available in <code>goshen-app</code>. <a href="https://meteor.com" target="_blank">Meteor</a> is required to transpile this code into a running Node app.</p><p>Below, we see this application in use:</p><blockquote>
<p><a><img src="../progress/app-demo.gif" alt=""></a><br>
<small>The user first receives a message from another user. (The other user has nothing interesting to say!) The current user switches his native language to English, and all chat messages that are not natively written in English are either translated, or a cached translation is substituted.</small></p>
</blockquote><h2 id="known-limitations1"><a class="anchor hidden-xs" href="#known-limitations" title="known-limitations"><span class="octicon octicon-link"></span></a>Known Limitations</h2><ul>
<li>Capitalization is ignored in the demonstration above because of a misconfiguration with the Perl capitalization scripts</li>
</ul><h2 id="future-work"><a class="anchor hidden-xs" href="#future-work" title="future-work"><span class="octicon octicon-link"></span></a>Future Work</h2><h3 id="installation-script"><a class="anchor hidden-xs" href="#installation-script" title="installation-script"><span class="octicon octicon-link"></span></a>Installation Script</h3><p>Now that I have developed installation scripts, it would be very simple to spin up a “template” like a Docker image or an AMI on the AWS Marketplace, and immediately support the Moses stack on a new machine with user-defined specs.</p><blockquote>
<p><strong>Update</strong>: May 9, 2016: I created a successful installation and froze an AWS image with the servers correctly configured and running. You can copy the <code>ami-9d58baf0</code> AMI to your personal account (from the ec2 marketplace) to spawn a ready-to-go moses-mt-server machine. I am currently running this AMI at <code>ec2-52-23-242-15.compute-1.amazonaws.com</code>, with moses-mt-server running on <code>:8081</code>. If you run into any difficulties with this server, please let me know so I can restart the processes. (To that end, I would like to add a restart script to handle memory overflows in casmacat, so that a ‘courteous’, throttling frontend like Goshen is not necessary.) To instructors of en600.468, I will gladly send you the login credentials to this server privately at your request so you can inspect the production environment that results from my installation scripts.</p>
</blockquote><h3 id="goshenjs-library"><a class="anchor hidden-xs" href="#goshenjs-library" title="goshenjs-library"><span class="octicon octicon-link"></span></a>Goshen.js Library</h3><p>I would like to write a further combinatorial adapter that allows different services to be queried, based on the success of each individual translation service. That is, after querying Moses, if the corpus is found to be incomplete for the purposes of the requested translation task, another engine (such as GT) can be queried as well. Or, for language-detection tasks, GT can be reached, but for alignment tasks, Moses can be used, with full opacity to the user.</p><h3 id="chrome-extension"><a class="anchor hidden-xs" href="#chrome-extension" title="chrome-extension"><span class="octicon octicon-link"></span></a>Chrome Extension</h3><p>This extension is nearly complete: The main modifications I would like to make are as follows:</p><ul>
<li><strong>See-original.</strong> Currently, the HTML element is permanently mutated in-place: To see the original text, you must reload the entire web-page.</li>
<li><strong>Translation-candidate display.</strong> One huge advantage that Moses has over Google Translate’s Chrome Extension is the native support for multiple candidate-translations. I would very much like to implement support for several overlays, so that mousing over translated text gives alternate translated text alongside the original.</li>
<li><strong>Publish.</strong> It’s easy to distribute Chrome extensions to the Chrome store. The only limitation on distributing this system is that it requires an always-on Moses server: Perhaps a casmacat demo server could be used, or perhaps a small server can be run from Hopkins infrastructure hardware that will support a small user-base for a deployed and published Chrome extension.</li>
</ul><h2 id="acknowledgements"><a class="anchor hidden-xs" href="#acknowledgements" title="acknowledgements"><span class="octicon octicon-link"></span></a>Acknowledgements</h2><p>My DOM-traversal code (available in <code>chromegoshen.js</code>) is (very) loosely adapted from the code I helped contribute to the Jetzt speed-reading codebase, available <a href="https://github.com/ds300/jetzt/" target="_blank">here</a>. I have many some simplifications and modifications in order to improve its usability for this particular task. Credit goes to <code>@DS300</code> as well, for his contributions to the original DOM-traversal code.</p><p>The Goshen Chrome icon is derived from the Google Chrome open-source repository. Credit to Google Chrome Development Group.</p></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-target="#" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav"><li class=""><a href="#goshen-golly-someone-please-help-me-acronymize" smoothhashscroll="">Goshen: GOlly, Someone please Help mE acroNymize!</a><ul class="nav"><li><a href="#abstract" smoothhashscroll="">Abstract</a></li><li><a href="#0-introduction" smoothhashscroll="">0. Introduction</a></li><li><a href="#1-installation-and-setup-scripts" smoothhashscroll="">1. Installation and Setup Scripts</a><ul class="nav"><li><a href="#moses-installation" smoothhashscroll="">Moses Installation</a></li><li><a href="#test-data-download-and-configuration" smoothhashscroll="">Test Data Download and Configuration</a></li><li><a href="#casmacat-moses-mt-server-installation" smoothhashscroll="">casmacat moses-mt-server Installation</a></li><li><a href="#the-whole-enchilada" smoothhashscroll="">The Whole Enchilada</a></li><li><a href="#running-casmacat’s-moses-mt-server-over-mosesserver" smoothhashscroll="">Running casmacat’s moses-mt-server over mosesserver</a></li><li><a href="#…so-finally" smoothhashscroll="">…so, finally:</a></li></ul></li><li><a href="#2-the-goshenjs-library" smoothhashscroll="">2. The Goshen.js Library</a></li><li><a href="#3-chrome-extension" smoothhashscroll="">3. Chrome Extension</a><ul class="nav"><li><a href="#known-limitations" smoothhashscroll="">Known Limitations</a></li><li><a href="#usage" smoothhashscroll="">Usage</a></li></ul></li><li><a href="#4-chat-application" smoothhashscroll="">4. Chat Application</a></li><li><a href="#known-limitations1" smoothhashscroll="">Known Limitations</a></li><li class=""><a href="#future-work" smoothhashscroll="">Future Work</a><ul class="nav"><li class=""><a href="#installation-script" smoothhashscroll="">Installation Script</a></li><li><a href="#goshenjs-library" smoothhashscroll="">Goshen.js Library</a></li><li><a href="#chrome-extension" smoothhashscroll="">Chrome Extension</a></li></ul></li><li><a href="#acknowledgements" smoothhashscroll="">Acknowledgements</a></li></ul></li></ul></div><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a>
            </ul>
        </div>
    </div>
    <div id="toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;"  >
        <div class="toc"><ul class="nav"><li class=""><a href="#goshen-golly-someone-please-help-me-acronymize" smoothhashscroll="">Goshen: GOlly, Someone please Help mE acroNymize!</a><ul class="nav"><li><a href="#abstract" smoothhashscroll="">Abstract</a></li><li><a href="#0-introduction" smoothhashscroll="">0. Introduction</a></li><li><a href="#1-installation-and-setup-scripts" smoothhashscroll="">1. Installation and Setup Scripts</a><ul class="nav"><li><a href="#moses-installation" smoothhashscroll="">Moses Installation</a></li><li><a href="#test-data-download-and-configuration" smoothhashscroll="">Test Data Download and Configuration</a></li><li><a href="#casmacat-moses-mt-server-installation" smoothhashscroll="">casmacat moses-mt-server Installation</a></li><li><a href="#the-whole-enchilada" smoothhashscroll="">The Whole Enchilada</a></li><li><a href="#running-casmacat’s-moses-mt-server-over-mosesserver" smoothhashscroll="">Running casmacat’s moses-mt-server over mosesserver</a></li><li><a href="#…so-finally" smoothhashscroll="">…so, finally:</a></li></ul></li><li><a href="#2-the-goshenjs-library" smoothhashscroll="">2. The Goshen.js Library</a></li><li><a href="#3-chrome-extension" smoothhashscroll="">3. Chrome Extension</a><ul class="nav"><li><a href="#known-limitations" smoothhashscroll="">Known Limitations</a></li><li><a href="#usage" smoothhashscroll="">Usage</a></li></ul></li><li><a href="#4-chat-application" smoothhashscroll="">4. Chat Application</a></li><li><a href="#known-limitations1" smoothhashscroll="">Known Limitations</a></li><li class=""><a href="#future-work" smoothhashscroll="">Future Work</a><ul class="nav"><li class=""><a href="#installation-script" smoothhashscroll="">Installation Script</a></li><li><a href="#goshenjs-library" smoothhashscroll="">Goshen.js Library</a></li><li><a href="#chrome-extension" smoothhashscroll="">Chrome Extension</a></li></ul></li><li><a href="#acknowledgements" smoothhashscroll="">Acknowledgements</a></li></ul></li></ul></div><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
